{% extends 'layout.html' %}
{% block body %}

	<div class="container-fluid">
    	<div class="row col-xs-12 col-sm-12 col-md-12 col-lg-12">
      		<div class="col-xs-3 col-sm-3 col-md-3 col-lg-3"><h3>New Category</h3></div>
    	</div>
    	<div class="row col-xs-12 col-sm-12 col-md-12 col-lg-12">
      		<form method="POST">
      			Name: <input type="text" name="categoryText">
      		<br>
      	</div>
      	<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
      			Available Skillsets
      			<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        			<table id="skillsetsTable" name="skillsetsTable"  class="table table-hover" cellspacing="10" width="100%" style="font-family: 'Lato', sans-serif; margin-left: auto; margin-right: auto; color: #1C384B;">
        				<tbody id="skillsetTableBody" style="margin-top: 10px;">
        					{% for skillsets in skillsets %}
        					<tr id="{{skillsets[0]}} name="row{{loop.index}}" style="background-color: #63C9E4; color: white; font-size: 18;  border-top: 2px solid white">"
        						<td style="padding-left: 10px;><input type="hidden" name="catSkillID" value="{{skillset[0]}}"</input></td>
        						<td style="padding-left: 10px;"><input type="checkbox" name="checkedSkillsets[]" value={{skillsets[0]}}>{{skillsets[2]}}</input></td>
        					</tr>
        					{% endfor %}
        				</tbody>
        			</table>
      			</div>
      		</form>
    	</div>
    	</br>
    	<div class="row col-xs-12 col-sm-12 col-md-12 col-lg-12">
      		<div class="float-left">
        		<input id="backButton" type="submit" class="btn btn-danger" href="/templates/index.html" style="width:100%; text-align: center; font-family: 'Lato', sans-serif;">Back</input>
      		</div>
      		<div class="float-right">
        		<input id="createButton" class="btn btn-success" data-toggle="modal" data-target="#createModal" disabled value="Create" style="width:100%; text-align: center; font-family: 'Lato', sans-serif;"></input
      		</div>
		</div>
		<!-- CONFIRMATION MODAL-->
				<div class="modal fade" id="createModal" tabindex="-1" role="dialog" aria-labelledby="confirmModalLabel" aria-hidden="true">
					<div class="modal-dialog" role="document">
						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title" id="confirmModalLabel">Category Creation</h5>
								<button type="button" class="close" data-dismiss="modal" aria-label="Close">
									<span aria-hidden="true">&times;</span>
								</button>
							</div>
							<div class="modal-body">
								Are you sure you want to create this category with these skillset(s)?
							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-secondary" data-dismiss="modal">Back</button>
								<button type="button" class="btn btn-primary" onclick="createCategory()">Start</button>
							</div>
						</div>
					</div>
				</div>
	</div> <!-- container end div -->
	<script>
	//sees how many skillsets are checked and increment value of their catskillID
	function getTotalSkillsets()
	{
		var totalCheckedSkillsets = $(this).find('input[name="checkedSkillsets[]"]:checked').length
		if(totalCheckedSkillsets > 1)
			{
				for(int i = 0; i < totalCheckedSkillsets; i++)
				{
					
				}
			}
	}
	
	function createCategory()
	{
		tableBody = $('skillsetsTable');
		tableRow = tableBody.find("tr:nth-child(1)");
		
		$('catSkillID').val(tableRow.find("td:nth-child(1)").text());
		$('category').val(tableRow.find("td:nth-child(2)").text());
		$('skillset').val(tableRow.find("td:nth-child(3)").text());
		
	}
	</script>
 {% endblock %}
