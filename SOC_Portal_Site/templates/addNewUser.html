{% extends 'layout.html' %}
{% block body %}

<div class="container-fluid">
    <div class="row col-xs-12 col-sm-12 col-md-12 col-lg-12" style="padding-top: 20px">
        <div class="col-xs-12 col-sm-5 col-md-6 col-lg-3">
            <img src="/static/Cybriant_Logo.png" height="60px" width="300px">
        </div>
        <div class="col-xs-4 col-sm-3 col-md-2 col-lg-2" style="color: #1C384B; padding-top: 20px">
            <a href="/taskQueue" style="color:#1C384B; text-decoration: none"><h3 style="font-family: 'Lato', sans-serif;">Hub Page</h3></a>
        </div>
        <div class="col-xs-4 col-sm-3 col-md-2 col-lg-2" style="color: #1C384B; padding-top: 20px">
            <a href="/overview" style="color:#1C384B; text-decoration: none"><h3 style="font-family: 'Lato', sans-serif;">Overview</h3></a>
        </div>
    </div>
    <hr style="border-width: 3px">
    <div class="row col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4" style="font-family: 'Lato', sans-serif; padding-left: 4%; padding-top: 50px">
            <h4 color="#1C384B">Add New User</h4>
        </div >
    </div>
    <br>

    {% from "includes/_formhelpers.html" import render_field %}
    <div class="row col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3" ></div>
        <form method="POST" action="">
            <div class="row">
                <div class="form-group col">
                    <dt>
                        <label for="firstNameInput">First Name</label>
                    </dt>
                    <dd>
                        <input class="form-control" id="firstNameInput" name="firstNameInput" type="text" onchange="updateUsername()" value="">
                    </dd>
                </div>
                <div class="form-group col">
                    <dt>
                        <label for="lastNameInput">Last Name</label>
                    </dt>
                    <dd>
                        <input class="form-control" id="lastNameInput" name="lastNameInput" type="text" onchange="updateUsername()" value="">
                    </dd>
                </div>
            </div>
            <div class="form-group">
                {{render_field(form.email, class_="form-control")}}
            </div>
            <div class="row">
                <div class="form-group col">
                    {{render_field(form.phoneNumber, class_="form-control")}}
                </div>
                <div class="form-group col">
                    <dt>
                        <label for="positionInput">Job Position</label>
                    </dt>
                    <dd>
                        <select class="form-control select" id="positionInput">
                            <option value="-1" disabled selected="selected">Select Position</option>
                            <option value="1">Analyst</option>
                            <option value="2">Manager</option>
                            <option value="3">Admin</option>
                        </select>
                    </dd>
                </div>
            </div>
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <hr  style="width: 100%; border-top: 1px solid gray;">
            </div>
            THIS IS WHERE THE SELECTING WILL HAPPEN
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <hr  style="width: 100%; border-top: 1px solid gray;">
            </div>
            <div class="form-group">
                <dt>
                    <label for="usernameInput">Username</label>
                </dt>
                <dd>
                    <input class="form-control" id="usernameInput" name="usernameInput" type="text" value="">
                </dd>
            </div>
            <div class="form-group">
                <dt>
                    <label for="passwordInput">Password</label>
                </dt>
                <dd>
                    <input class="form-control" id="passwordInput" name="passwordInput" type="password" value="">
                </dd>
            </div>
            <div class="form-group">
                <dt>
                    <label for="confPasswordInput">Confirm Password</label>
                </dt>
                <dd>
                    <input class="form-control" onchange="checkPassword()" id="confPasswordInput" name="confPasswordInput" type="password" value="">
                </dd>
            </div>
            <div hidden class="form-group">
                {{render_field(form.firstName, class_="form-control")}}
            </div>
            <div hidden class="form-group">
                {{render_field(form.lastName, class_="form-control")}}
            </div>
            <div hidden class="form-group">
                {{render_field(form.userName, class_="form-control")}}
            </div>
            <div hidden class="form-group">
                {{render_field(form.password, class_="form-control")}}
            </div>

            <p><input id="compBtn" disabled type="submit" class="btn btn-primary" onclick="complete()" value="Complete" style="width:100%; text-align: center; font-family: 'Lato', sans-serif;"></p>
        </form>
    </div>
</div>

<script type="text/javascript">

    function updateUsername(){
        var u;
        var first = ($('#firstNameInput').val()).toLowerCase();
        var last = ($('#lastNameInput').val()).toLowerCase();
        if (first != "" && last != ""){
            if (last.length > 8)
                last = last.substring(0,8);
            u = (first.substring(0,1)+(last));
            if (u.length<8){
                var num = (Math.floor(Math.random()*1000)).toString();
                num = num.substring(0,(9-u.length));
                u = u+num;
            }
            $('#usernameInput').val(u);
        }
        else
            $('#usernameInput').val("");
    }

    function checkPassword(){
        var confPass = $('#confPasswordInput').val();
        var pass = $('#passwordInput').val();
        if (confPass != pass){
            alert("Oh snap! Your passwords don't seem to match.");
        }
        else
            $('#compBtn').removeAttr('disabled');
    }

</script>
{% endblock %}